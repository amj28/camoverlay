CXX = g++
CXXFLAGS = -std=c++17 -O2 \
    `pkg-config --cflags opencv4 glfw3` \
    -Iimgui -Iimgui/backends

# List sources (your main + ImGui core + backends)
SRCS = main.cpp \
       imgui/imgui.cpp \
       imgui/imgui_draw.cpp \
       imgui/imgui_tables.cpp \
       imgui/imgui_widgets.cpp \
       imgui/backends/imgui_impl_glfw.cpp \
       imgui/backends/imgui_impl_opengl3.cpp

OBJS = $(SRCS:.cpp=.o)

# Link libs provided by pkg-config + OpenGL
LIBS = `pkg-config --libs opencv4 glfw3` -lGL

TARGET = camoverlay

all: $(TARGET)

$(TARGET): $(OBJS)
	$(CXX) $(OBJS) -o $(TARGET) $(LIBS)

%.o: %.cpp
	$(CXX) $(CXXFLAGS) -c $< -o $@

clean:
	rm -f $(OBJS) $(TARGET)
